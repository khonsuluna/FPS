local GUI_NAME = "HellTurboGui"

if game.CoreGui:FindFirstChild(GUI_NAME) then
    game.CoreGui:FindFirstChild(GUI_NAME):Destroy()
end

local gui = Instance.new("ScreenGui", game.CoreGui)
gui.Name = GUI_NAME
gui.ResetOnSpawn = false

local TweenService = game:GetService("TweenService")

-- Toggle factory
local function makeToggle(label, y)
    local frame = Instance.new("Frame", gui)
    frame.Size = UDim2.new(0, 160, 0, 32)
    frame.Position = UDim2.new(0, 10, 0, y)
    frame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
    frame.BorderSizePixel = 0

    local text = Instance.new("TextLabel", frame)  
    text.Size = UDim2.new(0.6,0,1,0)  
    text.BackgroundTransparency = 1  
    text.TextColor3 = Color3.fromRGB(255,255,255)  
    text.Text = label  
    text.Font = Enum.Font.GothamBold  
    text.TextXAlignment = Enum.TextXAlignment.Left  
    text.Position = UDim2.new(0,8,0,0)  

    local bg = Instance.new("Frame", frame)  
    bg.Size = UDim2.new(0,45,0,20)  
    bg.Position = UDim2.new(1,-55,0.5,-10)  
    bg.BackgroundColor3 = Color3.fromRGB(255,80,80) -- default OFF merah  
    bg.BorderSizePixel = 0  
    local uic = Instance.new("UICorner", bg)  
    uic.CornerRadius = UDim.new(0,12)  

    local knob = Instance.new("Frame", bg)  
    knob.Size = UDim2.new(0,18,0,18)  
    knob.Position = UDim2.new(0,1,0,1)  
    knob.BackgroundColor3 = Color3.fromRGB(255,255,255)  
    knob.BorderSizePixel = 0  
    Instance.new("UICorner", knob).CornerRadius = UDim.new(0,9)  

    local btn = Instance.new("TextButton", frame)  
    btn.Size = UDim2.new(1,0,1,0)  
    btn.Text = ""  
    btn.BackgroundTransparency = 1  
    btn.AutoButtonColor = false  

    return btn, knob, bg
end

local turboBtn, turboKnob, turboBG = makeToggle("TURBO", 80)
local extremeBtn, extremeKnob, extremeBG = makeToggle("EXTREME", 120)
local renderBtn, renderKnob, renderBG = makeToggle("3D Render", 160)

local ultra = false
local extreme = false
local render = true

local function switch(knob, bg, state)
    TweenService:Create(knob, TweenInfo.new(.2), {
        Position = state and UDim2.new(1,-19,0,1) or UDim2.new(0,1,0,1)
    }):Play()

    TweenService:Create(bg, TweenInfo.new(.2), {  
        BackgroundColor3 = state and Color3.fromRGB(80,255,100) or Color3.fromRGB(255,80,80)  
    }):Play()
end

-- ORIGINAL TURBO FEATURES
local function applyUltra(state)
    if state then
        settings().Rendering.QualityLevel = Enum.QualityLevel.Level01

        for _, v in ipairs(workspace:GetDescendants()) do  
            if v:IsA("BasePart") then  
                v.Material = Enum.Material.SmoothPlastic  
                v.Reflectance = 0  
            end  
            if v:IsA("Decal") or v:IsA("Texture") then  
                v.Transparency = 1  
            end  
            if v:IsA("ParticleEmitter") or v:IsA("Trail") or v:IsA("Smoke") then  
                v.Enabled = false  
            end  
        end  

        local L = game.Lighting  
        if L then  
            L.GlobalShadows = false  
            L.Ambient = Color3.new(1,1,1)  
            L.OutdoorAmbient = Color3.new(1,1,1)  
            L.Brightness = 1  
            L.FogEnd = 9e9  
            L.EnvironmentDiffuseScale = 0  
            L.EnvironmentSpecularScale = 0  
        end  
        workspace.CurrentCamera.FieldOfView = 70  
        pcall(function() setfpscap(9999) end)  
    else  
        settings().Rendering.QualityLevel = Enum.QualityLevel.Automatic  
    end
end

local function hidePlayers(state)
    for _, plr in ipairs(game.Players:GetPlayers()) do
        if plr ~= game.Players.LocalPlayer and plr.Character then
            for _, part in ipairs(plr.Character:GetDescendants()) do
                if part:IsA("BasePart") then
                    part.LocalTransparencyModifier = state and 1 or 0
                end
            end
        end
    end
end

local function killAcc(state)
    for _, plr in ipairs(game.Players:GetPlayers()) do
        if plr.Character then
            for _, v in ipairs(plr.Character:GetDescendants()) do
                if v:IsA("Accessory") or v:IsA("MeshPart") then
                    v.Transparency = state and 1 or 0
                end
            end
        end
    end
end

local function grassOff(state)
    workspace.Terrain.Decoration = not state
end

local function killAnim(state)
    local lp = game.Players.LocalPlayer
    if lp and lp.Character then
        for _, t in ipairs(lp.Character:FindFirstChildOfClass("Humanoid"):GetPlayingAnimationTracks()) do
            if state then t:Stop() end
        end
    end
end

local function distOff(state)
    workspace.CurrentCamera.MaxZoomDistance = state and 400 or 8
end

-- EXTREME MODE ULTRA GACOR
local function applyExtreme(state)
    local L = game.Lighting
    if state then
        -- Remove postFX
        for _, v in ipairs(L:GetChildren()) do
            if v:IsA("PostEffect") then
                v.Enabled = false
            end
        end

        -- Remove sky
        for _, v in ipairs(L:GetChildren()) do
            if v:IsA("Sky") then
                v:Destroy()
            end
        end

        -- Kill surface appearance
        for _, v in ipairs(workspace:GetDescendants()) do
            if v:IsA("SurfaceAppearance") then
                v:Destroy()
            end
        end

        -- Water off
        workspace.Terrain.WaterWaveSize = 0
        workspace.Terrain.WaterWaveSpeed = 0
        workspace.Terrain.WaterTransparency = 1
        workspace.Terrain.WaterReflectance = 0
        workspace.Terrain.Decoration = false

        -- Low poly mesh + basepart extreme
        for _, v in ipairs(workspace:GetDescendants()) do
            if v:IsA("MeshPart") then
                v.MeshId = ""
            end
            if v:IsA("BasePart") then
                v.CastShadow = false
                v.Material = Enum.Material.SmoothPlastic
                v.Color = Color3.fromRGB(120,120,120)
                v.Reflectance = 0
            end
            if v:IsA("Decal") or v:IsA("Texture") then
                v.Transparency = 1
            end
            if v:IsA("ParticleEmitter") or v:IsA("Trail") or v:IsA("Smoke") then
                v.Enabled = false
            end
        end

        -- Players & accessories grey
        for _, plr in ipairs(game.Players:GetPlayers()) do
            if plr.Character then
                for _, v in ipairs(plr.Character:GetDescendants()) do
                    if v:IsA("BasePart") or v:IsA("MeshPart") then
                        v.Color = Color3.fromRGB(150,150,150)
                        v.Material = Enum.Material.SmoothPlastic
                        v.Reflectance = 0
                    end
                    if v:IsA("Accessory") then
                        v.Transparency = 1
                    end
                end
            end
        end

        -- Stop all humanoid animations
        for _, plr in ipairs(game.Players:GetPlayers()) do
            if plr.Character then
                local hum = plr.Character:FindFirstChildOfClass("Humanoid")
                if hum then
                    for _, track in ipairs(hum:GetPlayingAnimationTracks()) do
                        track:Stop()
                    end
                end
            end
        end

        -- Lighting minimal
        L.Technology = Enum.Technology.Compatibility
        L.GlobalShadows = false
        L.Ambient = Color3.fromRGB(170,170,170)
        L.OutdoorAmbient = Color3.fromRGB(170,170,170)
        L.Brightness = 1
        L.FogEnd = 9e9
        L.EnvironmentDiffuseScale = 0
        L.EnvironmentSpecularScale = 0

        -- Camera distance
        workspace.CurrentCamera.MaxZoomDistance = 400
    else
        -- Revert minimal
        if not L:FindFirstChildOfClass("Sky") then
            Instance.new("Sky", L)
        end
        L.Technology = Enum.Technology.ShadowMap
        workspace.Terrain.WaterTransparency = 0.3
        workspace.Terrain.Decoration = true
    end
end

-- CLICK TURBO
turboBtn.MouseButton1Click:Connect(function()
    ultra = not ultra
    switch(turboKnob, turboBG, ultra)  -- switch dipanggil di atas
    task.defer(function() applyUltra(ultra) end)
    task.defer(function() hidePlayers(ultra) end)
    task.defer(function() killAcc(ultra) end)
    task.defer(function() grassOff(ultra) end)
    task.defer(function() killAnim(ultra) end)
    task.defer(function() distOff(ultra) end)
end)

-- CLICK EXTREME
extremeBtn.MouseButton1Click:Connect(function()
    extreme = not extreme
    switch(extremeKnob, extremeBG, extreme)  -- switch di atas
    task.defer(function() applyExtreme(extreme) end)
end)

-- CLICK RENDER
renderBtn.MouseButton1Click:Connect(function()
    render = not render
    game:GetService("RunService"):Set3dRenderingEnabled(render)
    switch(renderKnob, renderBG, render)
end)

-- Initial visual sync:
switch(turboKnob, turboBG, ultra)
switch(extremeKnob, extremeBG, extreme)
switch(renderKnob, renderBG, render)
