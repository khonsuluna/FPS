--// Potato ULTIMATE V3 Logic FIXED
--// By ChatGPT x You

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "PotatoV3GUI"
ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")
ScreenGui.ResetOnSpawn = false

-- BUTTONS
local function btn(text,pos)
    local b = Instance.new("TextButton")
    b.Size = UDim2.new(0,120,0,35)
    b.Position = pos
    b.BackgroundColor3 = Color3.fromRGB(50,50,50)
    b.TextColor3 = Color3.fromRGB(255,255,255)
    b.Font = Enum.Font.GothamSemibold
    b.TextSize = 14
    b.Text = text
    b.Parent = ScreenGui
    return b
end

local turboBtn = btn("Turbo: OFF",  UDim2.new(0,10,0,10))
local renderBtn = btn("Render: ON", UDim2.new(0,140,0,10))

-- STATES
local turbo = false
local render = true

local lighting = game.Lighting
local savedEffects = {}

for _,v in pairs(lighting:GetChildren()) do
    if v:IsA("PostEffect") then
        table.insert(savedEffects,v)
    end
end

-- APPLY TURBO
local function applyTurbo(state)
    turbo = state
    turboBtn.Text = state and "Turbo: ON" or "Turbo: OFF"

    if state then
        -- Remove animation
        for _,d in pairs(LocalPlayer.Character:GetDescendants()) do
            if d:IsA("Animator") then d:Destroy() end
        end

        -- Hide textures/decals
        for _,v in pairs(workspace:GetDescendants()) do
            if v:IsA("Decal") or v:IsA("Texture") then
                v.Transparency = 1
            end
        end

        -- Stop particles
        for _,v in pairs(workspace:GetDescendants()) do
            if v:IsA("ParticleEmitter") then
                v.Enabled = false
            end
        end

        lighting.GlobalShadows = false
        lighting.FogEnd = 9e9

        -- Disable postEffect
        for _,e in pairs(savedEffects) do e.Enabled = false end

        -- Remove grass
        workspace.Terrain.Decoration = false

    else
        -- RESTORE textures/decals
        for _,v in pairs(workspace:GetDescendants()) do
            if v:IsA("Decal") or v:IsA("Texture") then
                v.Transparency = 0
            end
            if v:IsA("ParticleEmitter") then
                v.Enabled = true
            end
        end

        lighting.GlobalShadows = true
        for _,e in pairs(savedEffects) do e.Enabled = true end
        workspace.Terrain.Decoration = true
    end
end

-- APPLY RENDER
local function applyRender(state)
    render = state
    renderBtn.Text = state and "Render: ON" or "Render: OFF"

    for _,v in pairs(workspace:GetDescendants()) do
        if v:IsA("BasePart") then
            v.Transparency = (state and 0 or 1)
        end
    end
end

-- EVENTS
turboBtn.MouseButton1Click:Connect(function()
    applyTurbo(not turbo)
end)

renderBtn.MouseButton1Click:Connect(function()
    applyRender(not render)
end)
