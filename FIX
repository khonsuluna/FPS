local GUI_NAME = "HellTurboGui"

if game.CoreGui:FindFirstChild(GUI_NAME) then
    game.CoreGui:FindFirstChild(GUI_NAME):Destroy()
end

local gui = Instance.new("ScreenGui", game.CoreGui)
gui.Name = GUI_NAME
gui.ResetOnSpawn = false

local TweenService = game:GetService("TweenService")

local function makeButton(text, y)
    local b = Instance.new("TextButton", gui)
    b.Size = UDim2.new(0, 120, 0, 25)
    b.Position = UDim2.new(0, 10, 0, y)
    b.BackgroundColor3 = Color3.fromRGB(30,30,30)
    b.TextColor3 = Color3.fromRGB(255,255,255)
    b.Text = text
    b.AutoButtonColor = false

    -- slider visual
    local slider = Instance.new("Frame", b)
    slider.Name = "Slide"
    slider.Size = UDim2.new(0.4,0,1,0)
    slider.Position = UDim2.new(0,0,0,0)
    slider.BackgroundColor3 = Color3.fromRGB(255,80,80)

    return b
end

local turboBtn   = makeButton("TURBO OFF", 80)
local renderBtn  = makeButton("3D ON",     110)

local ultra = false
local render = true

-- small click pop
local function pop(obj)
    TweenService:Create(obj, TweenInfo.new(.08), {Size = UDim2.new(0,115,0,22)}):Play()
    task.wait(.09)
    TweenService:Create(obj, TweenInfo.new(.08), {Size = UDim2.new(0,120,0,25)}):Play()
end

-- ULTRA TURBO
local function applyUltra(state)
    if state then
        settings().Rendering.QualityLevel = Enum.QualityLevel.Level01
        for _, v in ipairs(workspace:GetDescendants()) do
            if v:IsA("BasePart") then
                v.Material = Enum.Material.SmoothPlastic
                v.Reflectance = 0
            end
            if v:IsA("Decal") or v:IsA("Texture") then
                v.Transparency = 1
            end
            if v:IsA("ParticleEmitter") or v:IsA("Trail") or v:IsA("Smoke") then
                v.Enabled = false
            end
        end
        local L = game.Lighting
        if L then
            L.GlobalShadows = false
            L.Ambient = Color3.new(1,1,1)
            L.OutdoorAmbient = Color3.new(1,1,1)
            L.Brightness = 1
            L.FogEnd = 9e9
            L.EnvironmentDiffuseScale = 0
            L.EnvironmentSpecularScale = 0
        end
        workspace.CurrentCamera.FieldOfView = 70
        pcall(function() setfpscap(9999) end)
    else
        settings().Rendering.QualityLevel = Enum.QualityLevel.Automatic
    end
end

local function hidePlayers(state)
    for _, plr in ipairs(game.Players:GetPlayers()) do
        if plr ~= game.Players.LocalPlayer and plr.Character then
            for _, part in ipairs(plr.Character:GetDescendants()) do
                if part:IsA("BasePart") then
                    part.LocalTransparencyModifier = state and 1 or 0
                end
            end
        end
    end
end

local function killAcc(state)
    for _, plr in ipairs(game.Players:GetPlayers()) do
        if plr.Character then
            for _, v in ipairs(plr.Character:GetDescendants()) do
                if v:IsA("Accessory") or v:IsA("MeshPart") then
                    v.Transparency = state and 1 or 0
                end
            end
        end
    end
end

local function grassOff(state)
    workspace.Terrain.Decoration = not state
end

local function killAnim(state)
    local lp = game.Players.LocalPlayer
    if lp and lp.Character then
        for _, t in ipairs(lp.Character:FindFirstChildOfClass("Humanoid"):GetPlayingAnimationTracks()) do
            if state then t:Stop() end
        end
    end
end

local function distOff(state)
    workspace.CurrentCamera.MaxZoomDistance = state and 400 or 8
end

-- TURBO BTN
turboBtn.MouseButton1Click:Connect(function()
    pop(turboBtn)
    ultra = not ultra
    turboBtn.Text = ultra and "TURBO ON" or "TURBO OFF"
    applyUltra(ultra)

    hidePlayers(ultra)
    killAcc(ultra)
    grassOff(ultra)
    killAnim(ultra)
    distOff(ultra)

    local slide = turboBtn.Slide
    TweenService:Create(slide, TweenInfo.new(.25), {
        Position = ultra and UDim2.new(0.6,0,0,0) or UDim2.new(0,0,0,0),
        BackgroundColor3 = ultra and Color3.fromRGB(80,255,100) or Color3.fromRGB(255,80,80)
    }):Play()
end)

-- 3D independent
renderBtn.MouseButton1Click:Connect(function()
    pop(renderBtn)
    render = not render
    renderBtn.Text = render and "3D ON" or "3D OFF"

    local RS = game:GetService("RunService")
    local sound = game:GetService("SoundService")
    local cam = workspace.CurrentCamera
    local L = game.Lighting

    RS:Set3dRenderingEnabled(render)

    local slide = renderBtn.Slide
    TweenService:Create(slide, TweenInfo.new(.25), {
        Position = render and UDim2.new(0.6,0,0,0) or UDim2.new(0,0,0,0),
        BackgroundColor3 = render and Color3.fromRGB(80,255,100) or Color3.fromRGB(255,80,80)
    }):Play()

    if not render then
        sound.Volume = 0
        if cam then cam.FieldOfView = 40 end
        if L then L.Brightness = 0.5 end

        if not gui:FindFirstChild("WhiteOverlay") then
            local w = Instance.new("Frame", gui)
            w.Name = "WhiteOverlay"
            w.BackgroundColor3 = Color3.new(1,1,1)
            w.BackgroundTransparency = 0.05
            w.Size = UDim2.new(1,0,1,0)
            w.ZIndex = 9999
        end
    else
        sound.Volume = 1
        if cam then cam.FieldOfView = 70 end
        if L then L.Brightness = 2 end
        if gui:FindFirstChild("WhiteOverlay") then
            gui.WhiteOverlay:Destroy()
        end
    end
end)
